---
title: "Mysql Index"
date: 2022-07-19T20:37:11+08:00
draft: false
---

## innodb 索引

在 innodb 引擎中，每个索引就是一颗 B+ 树。索引分为主键索引和非主键索引

* 主键索引：也叫 聚簇索引，叶子结点存放的就是整行数据
* 非主键索引：也叫 二级索引，叶子结点存放的是主键的值

通过非主键索引搜索数据，得到主键的值，然后在主键索引搜索，会多一次索引数的遍历，这个过程称为回表

### 索引维护

为了维护索引的有序性，插入索引时，需要将索引插入合适的位置。如果数据所在页已经满了，需要重新
申请新的数据页，将部分数据移动过去。这个过程称为页分裂，性能会收到影响。

数据库的自增主键，按照顺序插入，很容易保证有序性。

### 如何减少回表次数

通过索引查询，需要回主键索引再查询一次，这就叫回表。

覆盖索引

如果要查的值直接在索引树中，比如查询主键id，这样直接就可以在索引树中获得，不需要回表。

索引表中的数据已经满足查询要求，称为覆盖索引。

最左前缀原则

对于联合索引，按照从左至右的顺序匹配。比如建立（a,b）索引后，单独的 a 索引就没有必要的。
所以有时可以考虑联合索引的顺序。

索引下推

对于联合索引，mysql 5.6以后会推断索引中是否满足其他条件